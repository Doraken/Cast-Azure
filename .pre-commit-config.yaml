---
# Pre-commit hooks configuration for Cast-Azure
# See https://pre-commit.com for more information

repos:
# General file checks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.5.0
  hooks:
  - id: trailing-whitespace
    name: Trim trailing whitespace
    description: Removes trailing whitespaces from files
  - id: end-of-file-fixer
    name: Fix end of files
    description: Ensures files end with a newline
  - id: check-yaml
    name: Check YAML syntax
    description: Validates YAML file syntax
    args: [ --unsafe ]
  - id: check-added-large-files
    name: Check for large files
    description: Prevents accidentally committing large files
    args: [ '--maxkb=1000' ]
  - id: check-case-conflict
    name: Check case conflicts
    description: Checks for files with names that would conflict on case-insensitive filesystems
  - id: check-merge-conflict
    name: Check for merge conflicts
    description: Checks for files that contain merge conflict strings
  - id: detect-private-key
    name: Detect private keys
    description: Detects the presence of private keys
  - id: mixed-line-ending
    name: Fix mixed line endings
    description: Ensures consistent line endings
    args: [ '--fix=lf' ]

# YAML linting
- repo: https://github.com/adrienverge/yamllint
  rev: v1.35.1
  hooks:
  - id: yamllint
    name: Lint YAML files
    description: Validates YAML files with yamllint
    args: [ -c=.yamllint ]
    types: [ yaml ]

# Secret detection with detect-secrets
- repo: https://github.com/Yelp/detect-secrets
  rev: v1.4.0
  hooks:
  - id: detect-secrets
    name: Detect secrets
    description: Detects secrets and high-entropy strings
    args: [ '--baseline', '.secrets.baseline' ]
    exclude: package.lock.json

# Secret detection with gitleaks
- repo: https://github.com/gitleaks/gitleaks
  rev: v8.18.2
  hooks:
  - id: gitleaks
    name: Gitleaks
    description: Scans for hardcoded secrets using gitleaks
    entry: gitleaks detect --source . --verbose --no-git

# Markdown linting
- repo: https://github.com/igorshubovych/markdownlint-cli
  rev: v0.39.0
  hooks:
  - id: markdownlint
    name: Lint Markdown files
    description: Validates Markdown files
    args: [ '--fix' ]

# Shell script linting
- repo: https://github.com/shellcheck-py/shellcheck-py
  rev: v0.10.0.1
  hooks:
  - id: shellcheck
    name: Lint shell scripts
    description: Validates shell scripts with shellcheck

# Commit message validation
- repo: https://github.com/commitizen-tools/commitizen
  rev: v3.15.0
  hooks:
  - id: commitizen
    name: Validate commit message
    description: Ensures commit messages follow conventional commits
    stages: [ commit-msg ]

# JSON validation
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.5.0
  hooks:
  - id: check-json
    name: Check JSON syntax
    description: Validates JSON file syntax

# Configuration for specific file types
default_language_version:
  python: python3

# Exclude patterns
exclude: |
  (?x)^(
      \.git/|
      \.github/|
      __pycache__/|
      .*\.pyc$|
      node_modules/
  )$

# Fail fast on first error
fail_fast: false

# Minimum pre-commit version
minimum_pre_commit_version: '3.0.0'
